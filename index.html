<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>羽歌天地博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="记录技术点滴">
<meta property="og:type" content="website">
<meta property="og:title" content="羽歌天地博客">
<meta property="og:url" content="https://blog.iyuge.cn/index.html">
<meta property="og:site_name" content="羽歌天地博客">
<meta property="og:description" content="记录技术点滴">
<meta property="og:locale">
<meta property="article:author" content="刘宏羽">
<meta property="article:tag" content="vue js nodejs es6 webpack react 前端 mysql 小程序">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="羽歌天地博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">羽歌天地博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.iyuge.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-运行yarn-eject-后-yarn-start-报错" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/e1691e31/" class="article-date">
  <time datetime="2020-06-04T11:00:34.000Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/e1691e31/">运行yarn eject 后 yarn start 报错</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>运行 yarn eject 把webpack配置暴露出来后，运行yarn start后报错，<br>报错的内容大致是 找不到 react-scripts下的config/env.js文件，然后查了下，发现node_module下 react-scripts被清空了，package.json文件<br>下也没有这个记录了，找了很多资料都没有结果，然后索性就按照这个包，按照好后就报各种插件版本低，比如webpack，babel等，然后全部升级后，启动就没有报错了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/e1691e31/" data-id="ckdqs3sg1001jmgm0ey8j7d7i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/" rel="tag">react,</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-在-create-react-app-中使用Ant-Design中的坑" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/204a2bf8/" class="article-date">
  <time datetime="2020-06-04T10:51:08.000Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/204a2bf8/">在 create-react-app 中使用Ant Design中的坑</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Ant-Design-中的文档有错误，参数变了"><a href="#Ant-Design-中的文档有错误，参数变了" class="headerlink" title="Ant Design 中的文档有错误，参数变了"></a>Ant Design 中的文档有错误，参数变了</h2><p>这是原来的配置：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// craco.config.js</span></span><br><span class="line"><span class="keyword">const</span> CracoLessPlugin = <span class="built_in">require</span>(<span class="string">&#x27;craco-less&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      plugin: CracoLessPlugin,</span><br><span class="line">      options: &#123;</span><br><span class="line">        lessLoaderOptions: &#123;</span><br><span class="line">          modifyVars: &#123; <span class="string">&#x27;@primary-color&#x27;</span>: <span class="string">&#x27;#1DA57A&#x27;</span> &#125;,</span><br><span class="line">          javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这是正确的配置：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// craco.config.js</span></span><br><span class="line"><span class="keyword">const</span> CracoLessPlugin = <span class="built_in">require</span>(<span class="string">&#x27;craco-less&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      plugin: CracoLessPlugin,</span><br><span class="line">      options: &#123;</span><br><span class="line">        lessLoaderOptions: &#123;</span><br><span class="line">           lessOptions:&#123;</span><br><span class="line">                modifyVars: &#123; <span class="string">&#x27;@primary-color&#x27;</span>: <span class="string">&#x27;#1DA57A&#x27;</span> &#125;,</span><br><span class="line">                javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/204a2bf8/" data-id="ckdqs3sfn000nmgm0alxg8341" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/" rel="tag">react,</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-windows下使用nexus搭建私有仓库并使用vue-cli-3-搭建组件库" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/73a5b140/" class="article-date">
  <time datetime="2019-08-13T02:21:42.000Z" itemprop="datePublished">2019-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/73a5b140/">windows下使用nexus搭建私有仓库并使用vue-cli 3 搭建组件库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>主要分为两部分：第一部分是nexus私有仓库的搭建，第二部分是vue-cli 3的组件搭建并发布到nexus本地仓库。</p>
<h2 id="nexus私有仓库的搭建"><a href="#nexus私有仓库的搭建" class="headerlink" title="nexus私有仓库的搭建"></a>nexus私有仓库的搭建</h2><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><ol>
<li>首先需要在<a target="_blank" rel="noopener" href="https://www.sonatype.com/oss-thank-you-win64.zip?submissionGuid=2c6a43fc-9aa5-4acc-b995-87cb63b04d66"><font style="color:red">官网</font></a>下载nexus windows版本（注意：需要翻墙，自备梯子）。</li>
<li>以管理员身份运行cmd（注意：必须是管理员运行且必须是cmd，win10的powershell都会报错），然后切换到<code>C:\node\nexus\nexus-3.18.0-01-win64\nexus-3.18.0-01\bin</code> 软件下载后的解压目录。<br><font style="color:red">nexus启动前，最好修改下<code>C:\node\nexus\nexus-3.18.0-01-win64\nexus-3.18.0-01\bin\nexus.vmoptions</code>的配置</font>，防止出现内存不足的报错导致无法启动，我这里修改为<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-Xms600m</span></span><br><span class="line"><span class="deletion">-Xmx600m</span></span><br><span class="line"><span class="deletion">-XX:MaxDirectMemorySize=1G</span></span><br></pre></td></tr></table></figure>
默认都是约2G</li>
</ol>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nexus.exe /install #执行安装命令， 成功后会提示Installed<span class="built_in"> service </span><span class="string">&#x27;nexus</span></span><br><span class="line"><span class="string">nexus.exe /run #运行服务，首次运行需要等待1~2分钟</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>启动完毕后,进入 http://(本机IP):8081（最好是自定义电脑ip），点击右上角Sign In进行登录，默认账号 admin<br>默认密码存放在<code>C:\node\nexus\nexus-3.18.0-01-win64\sonatype-work\nexus3\**.password</code> 打开文件后复制密码串进行登录，<br>登录后会提示修改密码，修改完重新登录即可。然后<code>**.password</code>文件就会自动删除。</li>
</ol>
<h3 id="添加npm仓库"><a href="#添加npm仓库" class="headerlink" title="添加npm仓库"></a>添加npm仓库</h3><p>点击左侧菜单Repositories 查看仓库列表<br><img src="1.png"></p>
<ul>
<li>点击Create repository按钮创建仓库</li>
<li>group表示分组 hosted表示本机私有 proxy表示远程代理（中央仓库）</li>
<li>若registry配置为group（包括hosted和proxy）,首次会从hosted拉取，若无则从proxy拉取并缓存，下次则直接从缓存取</li>
</ul>
<ol>
<li><p>添加npm(proxy)仓库：<br>选择npm(proxy)<br>输入<code>Name: npmjs.org</code><br><code>Remote storage: https://registry.npmjs.org</code><br>如图：<br><img src="2.png"></p>
</li>
<li><p>添加npm(hosted)仓库：<br>选择npm(hosted)<br>输入<code>Name：npm-hosted</code>用于存放自己发布的私有包<br>如图：<br><img src="3.png"></p>
</li>
<li><p>添加npm(group)仓库：<br>选择npm(group)<br>输入<code>Name: npm-group</code>，并在Member repositories里选择之前添加的两个移到右边<br>如图：<br><img src="4.png"></p>
</li>
</ol>
<h3 id="配置与验证npm仓库"><a href="#配置与验证npm仓库" class="headerlink" title="配置与验证npm仓库"></a>配置与验证npm仓库</h3><p>添加发布角色用户及权限</p>
<ol>
<li>添加权限认证 将npm Beared Token Realm 添加至右边<br>如图：<br><img src="5.png"></li>
<li>创建nx-deploy角色并赋予一个nx-repository-view—*的权限码<br><img src="6.png"></li>
<li>创建deployer用户 同时设定角色为nx-deploy<br><img src="7.png"></li>
</ol>
<h3 id="变更依赖源"><a href="#变更依赖源" class="headerlink" title="变更依赖源"></a>变更依赖源</h3><p>安装nrm <code>npm i -g nrm</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="keyword">set</span> registry https://registry.npm.taobao.org <span class="comment">#设置为探宝源</span></span><br><span class="line">nrm <span class="keyword">add</span> <span class="keyword">private</span> <span class="keyword">http</span>://<span class="number">192.168</span><span class="number">.38</span><span class="number">.64</span>:<span class="number">8081</span>/repository/npm-<span class="keyword">all</span>/ <span class="comment">#本机ip</span></span><br><span class="line">nrm <span class="keyword">use</span> <span class="keyword">private</span> <span class="comment">#使用私有源</span></span><br></pre></td></tr></table></figure>
<h3 id="发布流程"><a href="#发布流程" class="headerlink" title="发布流程"></a>发布流程</h3><p>每次发布前记得在package.json中检查version 有没有修改，要确认比上一个版本号高</p>
<h3 id="编译文件"><a href="#编译文件" class="headerlink" title="编译文件"></a>编译文件</h3><p><code>yarn lib</code>或者使用npm</p>
<h3 id="登录npm"><a href="#登录npm" class="headerlink" title="登录npm"></a>登录npm</h3><p><code>npm login -registry http://192.168.38.64:8081/repository/npm-hosted/</code></p>
<h3 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h3><p><code>npm publish -registry http://192.168.38.64:8081/repository/npm-hosted/</code><br>发布成功后在npm-hosted 能看到发布后的包<br><img src="8.png"></p>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;组件库名称&quot;</span>: <span class="string">&quot;版本号&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> 组件库名称 <span class="keyword">from</span> <span class="string">&#x27;组件库名称&#x27;</span></span><br><span class="line">Vue.use(组件库名称)</span><br></pre></td></tr></table></figure>
<h3 id="项目启动"><a href="#项目启动" class="headerlink" title="项目启动"></a>项目启动</h3><p><code>yarn serve</code>或者使用npm</p>
<h3 id="组件库文件目录结构"><a href="#组件库文件目录结构" class="headerlink" title="组件库文件目录结构"></a>组件库文件目录结构</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">├── examples                      <span class="comment"># 示例展示  </span></span><br><span class="line">│   ├── api                       <span class="comment"># 接口类  </span></span><br><span class="line">│   ├── assets                    <span class="comment"># 资源文件夹  </span></span><br><span class="line">│   ├── common                    <span class="comment"># 工具类  </span></span><br><span class="line">│   ├── components                <span class="comment"># 项目内部组件  </span></span><br><span class="line">│   ├── page                      <span class="comment"># 页面  </span></span><br><span class="line">│   ├── router                    <span class="comment"># 路由配置  </span></span><br><span class="line">│   ├── style                     <span class="comment"># 页面样式问题，主题等  </span></span><br><span class="line">│   ├── App.vue                   <span class="comment"># 入口页面  </span></span><br><span class="line">│   ├── main.js                   <span class="comment"># 入口文件 加载组件 初始化等  </span></span><br><span class="line">├── <span class="class"><span class="keyword">lib</span>                           <span class="comment"># 编译后输出的组件目录  </span></span></span><br><span class="line">├── packages                      <span class="comment"># 公共组件目录    </span></span><br><span class="line">│   ├── query-drop-box            <span class="comment"># demo组件  </span></span><br><span class="line">│   ├── simple-input              <span class="comment"># demo组件  </span></span><br><span class="line">│   ├── index.js                  <span class="comment"># 组件入口文件  </span></span><br><span class="line">├── public                        <span class="comment"># 静态资源  </span></span><br><span class="line">│   │── favicon.ico               <span class="comment"># favicon图标  </span></span><br><span class="line">│   └── index.html                <span class="comment"># html模板  </span></span><br><span class="line">├── .gitignore                    <span class="comment"># git 配置  </span></span><br><span class="line">├── .npmignore                    <span class="comment"># npm 配置  </span></span><br><span class="line">├── vue.config.js                 <span class="comment"># vue-cli 配置  </span></span><br><span class="line">├── babel.config.js               <span class="comment"># babel 配置  </span></span><br><span class="line">├── yarn.lock                     <span class="comment"># yarn依赖 配置  </span></span><br><span class="line">└── package.json                  <span class="comment"># package.json  </span></span><br></pre></td></tr></table></figure>
<p>这里贴一下<code>vue.config.js</code>文件的配置：</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line">function<span class="meta"> resolve(</span>dir) &#123;</span><br><span class="line">    <span class="meta">return</span> path.jo<span class="meta">in(</span>__dirname, dir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    pages: &#123;</span><br><span class="line">        <span class="meta">index</span>: &#123;</span><br><span class="line">            entry: <span class="string">&#x27;examples/main.js&#x27;</span>,</span><br><span class="line">            template: <span class="string">&#x27;public/index.html&#x27;</span>,</span><br><span class="line">            <span class="meta">filename</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    productionSourceMap: false,</span><br><span class="line">    css: &#123;</span><br><span class="line">        extract: false,</span><br><span class="line">        modules: false,</span><br><span class="line">        sourceMap: false,</span><br><span class="line">        loaderOptions: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 扩展 webpack 配置，使 packages 加入编译</span><br><span class="line">    chainWebpack: config =&gt; &#123;</span><br><span class="line">        config.module</span><br><span class="line">            .rule(<span class="string">&#x27;js&#x27;</span>)</span><br><span class="line">            .include</span><br><span class="line">            .<span class="meta">add</span>(<span class="string">&#x27;/packages/&#x27;</span>)</span><br><span class="line">            .<span class="meta">end</span>()</span><br><span class="line">            .use(<span class="string">&#x27;babel&#x27;</span>)</span><br><span class="line">            .loader(<span class="string">&#x27;babel-loader&#x27;</span>)</span><br><span class="line">            .tap(<span class="meta">options</span> =&gt; &#123;</span><br><span class="line">                // 修改它的选项...</span><br><span class="line">                <span class="meta">return</span> <span class="meta">options</span></span><br><span class="line">            &#125;)</span><br><span class="line">        config.resolve.alias</span><br><span class="line">            .<span class="meta">set</span>(<span class="string">&#x27;@&#x27;</span>,<span class="meta"> resolve(</span><span class="string">&#x27;examples&#x27;</span>))</span><br><span class="line">            .<span class="meta">set</span>(<span class="string">&#x27;src&#x27;</span>,<span class="meta"> resolve(</span><span class="string">&#x27;examples&#x27;</span>))</span><br><span class="line">            .<span class="meta">set</span>(<span class="string">&#x27;components&#x27;</span>,<span class="meta"> resolve(</span><span class="string">&#x27;examples/components&#x27;</span>))</span><br><span class="line">            .<span class="meta">set</span>(<span class="string">&#x27;examples&#x27;</span>,<span class="meta"> resolve(</span><span class="string">&#x27;examples&#x27;</span>))</span><br><span class="line">            .<span class="meta">set</span>(<span class="string">&#x27;common&#x27;</span>,<span class="meta"> resolve(</span><span class="string">&#x27;examples/common&#x27;</span>))</span><br><span class="line">            .<span class="meta">set</span>(<span class="string">&#x27;packages&#x27;</span>,<span class="meta"> resolve(</span><span class="string">&#x27;packages&#x27;</span>))</span><br><span class="line">            .<span class="meta">set</span>(<span class="string">&#x27;api&#x27;</span>,<span class="meta"> resolve(</span><span class="string">&#x27;examples/api&#x27;</span>))</span><br><span class="line">            <span class="comment">/* 添加分析工具*/</span></span><br><span class="line">        <span class="meta">if</span> (process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">            <span class="meta">if</span> (process.env.npm_config_report) &#123;</span><br><span class="line">                config</span><br><span class="line">                    .plug<span class="meta">in(</span><span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>)</span><br><span class="line">                    .use(require(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>).BundleAnalyzerPlugin)</span><br><span class="line">                    .<span class="meta">end</span>()</span><br><span class="line">                config.plugins.<span class="meta">delete</span>(<span class="string">&#x27;prefetch&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/73a5b140/" data-id="ckdqs3sfi000hmgm035a9hlzu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nexus/" rel="tag">nexus</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-在重启阿里云ubantu后nginx、mysql、pm2等的重启" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/c20fd3fa/" class="article-date">
  <time datetime="2019-07-05T01:25:24.000Z" itemprop="datePublished">2019-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/c20fd3fa/">在重启阿里云ubantu后nginx、mysql、pm2等的重启</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>由于对linux的不熟，很多命令都记不住，2018年也是花了几天时间才把服务器环境搭起来，部署了nodejs的水研村官网前后端、部署了“账目随身记”小程序后端，并且利用nginx做了小程序需要的ssl证书转发https，现在已经忘了具体的操作了，免费ssl证书准备过期了，准备又得重新折腾了，下次一定得记录下来。<br>好了，在重启服务器之前得做点准备工作，得先找出nginx安装得目录，mysql安装得目录，到时候可以直接去到目录下直接执行例如./nginx这样来启动。我以为大多数linux安装目录都差不多，于是直接网上搜别人得，结果结果不是我想要的，后来我问了位前同事，用whereis nginx 来查找nginx的位置，然后出现了以下目录：<br><img src="2.png"><br>红色圈起来的才是我的nginx的安装目录，nginx就是可执行文件，另外，经过多次摸索和回忆，配置文件在蓝色圈起来的地方，<br>具体的位置是：<br><img src="1.png"><br><code>nginx -t</code>为查找nginx配置文件所在的目录。<br>然后默认的default配置文件我没用，我自己写了个small.conf配置文件，里面配置了syc.iyuge.cn 水研村官网前台的转发地址，以及小程序需要的account后端的https的ssl配置<br>具体代码如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span>;</span><br><span class="line">    <span class="attribute">server_name</span> small.iyuge.cn;</span><br><span class="line">    <span class="attribute">access_log</span> /var/www/log/small-access.log;</span><br><span class="line">    <span class="attribute">error_log</span>  /var/www/log/small-<span class="literal">error</span>.log;</span><br><span class="line">    <span class="attribute">ssl</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">ssl_certificate</span>   /etc/nginx/cert/<span class="number">214999081890300</span>.pem; <span class="comment">#指定服务器证书路径 </span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/nginx/cert/<span class="number">214999081890300</span>.key; <span class="comment">#指定私钥证书路径</span></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">5m</span>;</span><br><span class="line">    <span class="comment">#ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span></span><br><span class="line">    <span class="attribute">ssl_ciphers</span>  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP; <span class="comment">#指定加密算法 </span></span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;<span class="comment">#指定SSL服务器端支持的协议版本 </span></span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-NginX-Proxy <span class="literal">true</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:3000/;</span><br><span class="line">        <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> syc.iyuge.cn; <span class="comment">#这是水研村前台官网的映射</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">       </span><br><span class="line">    <span class="attribute">root</span> /root/code/shuiyancun_vue;</span><br><span class="line">    <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>至于这个证书是怎么跟我的account关联起来的，这个我还真的忘了，我没记错的话，account和shuiyancun_back都有个nginx.conf文件,去看了下，account居然没有？只有shuiyancun_back才有。<br>想起来了，原来是需要在阿里云官网开放相应的端口后，外网才能访问的，而我是用pm2来启动项目的，也会有端口号，如图：<br><img src="3.png"><br><font color=#ff6a00>至于怎么制作ssl证书，等我两个月后证书过期了，再摸索一次记录下来吧</font><br>重启mginx的方法可以去到<code>/usr/sbin/nginx</code>目录，执行./nginx 启动。启动mysql的方式可以有两种：1.和nginx一样，但是要加用户名和密码，<code>./mysql  -u root -p</code> 然后输入密码就打开数据库了；2.直接 <code>mysql -u root -p</code> 输入密码。</p>
<p>另外如果发现停止了PM2中某个项目的时候，还能运行，则说明这个程序已经以另外一种方式在运行了，我们需要查找正在运行的nodejs进程:<code>ps aux | grep node</code><br>发现有进程后，直接<code>kill 具体pid </code>就可以了</p>
<p>最后就是项目的启动了，进到项目目录执行 <code>pm2 restart（或者start） pm2.json （因为有配置文件了）</code> 就可以启动项目了<br>注意：<font color=#ff6a00>不知道为什么pm2只能监控watch一个项目，如果是两个都watch，另一个项目无法跑起来，所以我的水研村后台就不watch了</font></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/c20fd3fa/" data-id="ckdqs3sfq000smgm02dnf9zii" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-一个奇葩的表格统计需求" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/507fa396/" class="article-date">
  <time datetime="2019-06-17T07:41:51.000Z" itemprop="datePublished">2019-06-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>►<a class="article-category-link" href="/categories/vue/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/507fa396/">一个奇葩的表格统计需求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>有个报表统计的需求，先上需求图：<br><img src="1.jpg"><br>咋一看，好像挺简单啊，不就是一个表格吗？<br>这么想那就大错特错了。这个需求实际上只有三行，也就是说需要统计“数量”，“项目造价金额”，“项目合同金额”这三个字段在不同状态下的值，也就是各列的“已报备”，“已中标”…. 等等。我们知道如果要实现这一的需求，必须要把“数量”，“项目造价金额”，“项目合同金额”这三个字段在各列中当成一个字段来处理，这样才会显示三行。比如element-ui的table的简单例子：<br><img src="2.jpg"><br><img src="3.jpg"><br>那后端就要返回这样的格式了<br><img src="4.jpg"><br><font color=red>坑就坑在我们这个后端返回的数据结构上，他说他只能按照状态查询结果返回给我！</font></p>
<h3 id="来看看他返回的数据结构是什么："><a href="#来看看他返回的数据结构是什么：" class="headerlink" title="来看看他返回的数据结构是什么："></a>来看看他返回的数据结构是什么：</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;code&quot;</span>:<span class="string">&quot;200&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;message&quot;</span>:<span class="string">&quot;成功&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;responseBody&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;code&quot;</span>:<span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;data&quot;</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;averageContractAmount&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countBuliding&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countContract&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countProject&quot;</span>:<span class="number">2</span>,</span><br><span class="line">                <span class="attr">&quot;dayTime&quot;</span>:<span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;projStatus&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;projStatusName&quot;</span>:<span class="string">&quot;草稿&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;totalContractAmount&quot;</span>:<span class="number">0.00</span>,</span><br><span class="line">                <span class="attr">&quot;totalProjectAmount&quot;</span>:<span class="number">17.94</span>,</span><br><span class="line">                <span class="attr">&quot;totalReturnAmount&quot;</span>:<span class="number">0.00</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;averageContractAmount&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countBuliding&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countContract&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countProject&quot;</span>:<span class="number">12</span>,</span><br><span class="line">                <span class="attr">&quot;dayTime&quot;</span>:<span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;projStatus&quot;</span>:<span class="number">1</span>,</span><br><span class="line">                <span class="attr">&quot;projStatusName&quot;</span>:<span class="string">&quot;报备中&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;totalContractAmount&quot;</span>:<span class="number">0.00</span>,</span><br><span class="line">                <span class="attr">&quot;totalProjectAmount&quot;</span>:<span class="number">103.65</span>,</span><br><span class="line">                <span class="attr">&quot;totalReturnAmount&quot;</span>:<span class="number">0.00</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;averageContractAmount&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countBuliding&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countContract&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countProject&quot;</span>:<span class="number">17</span>,</span><br><span class="line">                <span class="attr">&quot;dayTime&quot;</span>:<span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;projStatus&quot;</span>:<span class="number">2</span>,</span><br><span class="line">                <span class="attr">&quot;projStatusName&quot;</span>:<span class="string">&quot;已报备&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;totalContractAmount&quot;</span>:<span class="number">0.00</span>,</span><br><span class="line">                <span class="attr">&quot;totalProjectAmount&quot;</span>:<span class="number">5732.99</span>,</span><br><span class="line">                <span class="attr">&quot;totalReturnAmount&quot;</span>:<span class="number">0.00</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;averageContractAmount&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countBuliding&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countContract&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countProject&quot;</span>:<span class="number">5</span>,</span><br><span class="line">                <span class="attr">&quot;dayTime&quot;</span>:<span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;projStatus&quot;</span>:<span class="number">4</span>,</span><br><span class="line">                <span class="attr">&quot;projStatusName&quot;</span>:<span class="string">&quot;已中标&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;totalContractAmount&quot;</span>:<span class="number">4478.88</span>,</span><br><span class="line">                <span class="attr">&quot;totalProjectAmount&quot;</span>:<span class="number">18.11</span>,</span><br><span class="line">                <span class="attr">&quot;totalReturnAmount&quot;</span>:<span class="number">0.00</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;averageContractAmount&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countBuliding&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countContract&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countProject&quot;</span>:<span class="number">6</span>,</span><br><span class="line">                <span class="attr">&quot;dayTime&quot;</span>:<span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;projStatus&quot;</span>:<span class="number">6</span>,</span><br><span class="line">                <span class="attr">&quot;projStatusName&quot;</span>:<span class="string">&quot;建设中&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;totalContractAmount&quot;</span>:<span class="number">14.10</span>,</span><br><span class="line">                <span class="attr">&quot;totalProjectAmount&quot;</span>:<span class="number">154.01</span>,</span><br><span class="line">                <span class="attr">&quot;totalReturnAmount&quot;</span>:<span class="number">0.00</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;averageContractAmount&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countBuliding&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countContract&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countProject&quot;</span>:<span class="number">1</span>,</span><br><span class="line">                <span class="attr">&quot;dayTime&quot;</span>:<span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;projStatus&quot;</span>:<span class="number">7</span>,</span><br><span class="line">                <span class="attr">&quot;projStatusName&quot;</span>:<span class="string">&quot;已竣工&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;totalContractAmount&quot;</span>:<span class="number">1.00</span>,</span><br><span class="line">                <span class="attr">&quot;totalProjectAmount&quot;</span>:<span class="number">1.00</span>,</span><br><span class="line">                <span class="attr">&quot;totalReturnAmount&quot;</span>:<span class="number">0.00</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;averageContractAmount&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countBuliding&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countContract&quot;</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;countProject&quot;</span>:<span class="number">1</span>,</span><br><span class="line">                <span class="attr">&quot;dayTime&quot;</span>:<span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;projStatus&quot;</span>:<span class="number">10</span>,</span><br><span class="line">                <span class="attr">&quot;projStatusName&quot;</span>:<span class="string">&quot;已删除&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;totalContractAmount&quot;</span>:<span class="number">0.00</span>,</span><br><span class="line">                <span class="attr">&quot;totalProjectAmount&quot;</span>:<span class="number">0.12</span>,</span><br><span class="line">                <span class="attr">&quot;totalReturnAmount&quot;</span>:<span class="number">0.00</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;message&quot;</span>:<span class="string">&quot;操作成功&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中<code>projStatus</code>就是上面提到的“报备中”，“已中标”等等列的状态值了，但是这样渲染出来的表格是10行，因为他数组没有处理，直接有多少个状态有值就返回多少条记录。实际上我前端这边需要的字段是这样的 </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123; <span class="attr">typeName:</span> <span class="string">&#x27;数量&#x27;</span>, <span class="attr">projStatus:</span> <span class="number">1</span>, <span class="attr">total_1:</span> <span class="number">2</span>, <span class="attr">total_2:</span> <span class="number">2</span>, <span class="attr">total_3:</span> <span class="number">2</span>, <span class="attr">total_4:</span> <span class="number">2</span>, <span class="attr">total_5:</span> <span class="number">2</span>, <span class="attr">total_6:</span> <span class="number">2</span>, <span class="attr">total_7:</span> <span class="number">2</span>, <span class="attr">total_8:</span> <span class="number">2</span>, <span class="attr">total_9:</span> <span class="number">2</span>, <span class="attr">total_10:</span> <span class="number">2</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">typeName:</span> <span class="string">&#x27;项目造价金额（万）&#x27;</span>, <span class="attr">projStatus:</span> <span class="number">1</span>, <span class="attr">total_1:</span> <span class="number">2</span>, <span class="attr">total_2:</span> <span class="number">2</span>, <span class="attr">total_3:</span> <span class="number">2</span>, <span class="attr">total_4:</span> <span class="number">2</span>, <span class="attr">total_5:</span> <span class="number">2</span>, <span class="attr">total_6:</span> <span class="number">2</span>, <span class="attr">total_7:</span> <span class="number">2</span>, <span class="attr">total_8:</span> <span class="number">2</span>, <span class="attr">total_9:</span> <span class="number">2</span>, <span class="attr">total_10:</span> <span class="number">2</span> &#125;,</span><br><span class="line"></span><br><span class="line">    &#123; <span class="attr">typeName:</span> <span class="string">&#x27;项目合同金额（万）&#x27;</span>, <span class="attr">projStatus:</span> <span class="number">1</span>, <span class="attr">total_1:</span> <span class="number">2</span>, <span class="attr">total_2:</span> <span class="number">2</span>, <span class="attr">total_3:</span> <span class="number">2</span>, <span class="attr">total_4:</span> <span class="number">2</span>, <span class="attr">total_5:</span> <span class="number">2</span>, <span class="attr">total_6:</span> <span class="number">2</span>, <span class="attr">total_7:</span> <span class="number">2</span>, <span class="attr">total_8:</span> <span class="number">2</span>, <span class="attr">total_9:</span> <span class="number">2</span>, <span class="attr">total_10:</span> <span class="number">2</span> &#125; </span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>这就需要自己进行艰苦的数据处理了。。。<br>根据他字段返回的 <code>countProject //数量</code> <code>totalProjectAmount //项目造价</code> <code>totalContractAmount //项目合同</code>  这三个字段分类把数据重新组合成三个数组。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">deep<span class="constructor">DealArr(<span class="params">data</span>, <span class="params">num</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> countProject = <span class="literal">[]</span>;</span><br><span class="line">    <span class="keyword">let</span> totalProjectAmount = <span class="literal">[]</span>;</span><br><span class="line">    <span class="keyword">let</span> totalContractAmount = <span class="literal">[]</span>;</span><br><span class="line">    <span class="keyword">if</span> (num<span class="operator"> === </span><span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> _data = this.utils.copy(data);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="module-access"><span class="module"><span class="identifier">_data</span>.</span></span>length; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> ind = _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus</span><br><span class="line">            const dataObj = &#123;&#125;</span><br><span class="line">            dataObj.projStatus = _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus</span><br><span class="line">            dataObj<span class="literal">[&#x27;<span class="identifier">total_</span>&#x27; + <span class="identifier">ind</span>]</span> = _data<span class="literal">[<span class="identifier">i</span>]</span>.countProject</span><br><span class="line">            countProject.push(dataObj)</span><br><span class="line">        &#125;</span><br><span class="line">        countProject.splice(<span class="number">0</span>, <span class="number">0</span>, &#123; typeName: &#x27;数量&#x27; &#125;)</span><br><span class="line">        return countProject;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num<span class="operator"> === </span><span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> _data = this.utils.copy(data);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="module-access"><span class="module"><span class="identifier">_data</span>.</span></span>length; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> ind = _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus</span><br><span class="line">            const dataObj = &#123;&#125;</span><br><span class="line">            dataObj.projStatus = _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus</span><br><span class="line">            dataObj<span class="literal">[&#x27;<span class="identifier">total_</span>&#x27; + <span class="identifier">ind</span>]</span> = _data<span class="literal">[<span class="identifier">i</span>]</span>.totalProjectAmount</span><br><span class="line">            totalProjectAmount.push(dataObj)</span><br><span class="line">        &#125;</span><br><span class="line">        totalProjectAmount.splice(<span class="number">0</span>, <span class="number">0</span>, &#123; typeName: &#x27;项目造价金额（万）&#x27; &#125;)</span><br><span class="line">        return totalProjectAmount;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> _data = this.utils.copy(data);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="module-access"><span class="module"><span class="identifier">_data</span>.</span></span>length; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> ind = _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus</span><br><span class="line">            const dataObj = &#123;&#125;</span><br><span class="line">            dataObj.projStatus = _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus</span><br><span class="line">            dataObj<span class="literal">[&#x27;<span class="identifier">total_</span>&#x27; + <span class="identifier">ind</span>]</span> = _data<span class="literal">[<span class="identifier">i</span>]</span>.totalContractAmount</span><br><span class="line">            totalContractAmount.push(dataObj)</span><br><span class="line">        &#125;</span><br><span class="line">        totalContractAmount.splice(<span class="number">0</span>, <span class="number">0</span>, &#123; typeName: &#x27;项目合同金额（万）&#x27; &#125;)</span><br><span class="line">        return totalContractAmount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 处理返回数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">deal<span class="constructor">Arry(<span class="params">data</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> _data = this.utils.copy(data);<span class="comment">//这个data 就是后端返回的初始结构的数据</span></span><br><span class="line">    <span class="keyword">let</span> countProject = <span class="literal">[]</span>; <span class="comment">//数量</span></span><br><span class="line">    <span class="keyword">let</span> totalProjectAmount = <span class="literal">[]</span>;<span class="comment">//项目造价</span></span><br><span class="line">    <span class="keyword">let</span> totalContractAmount = <span class="literal">[]</span>; <span class="comment">//项目合同</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理出来的结果是类似 [&#123; typeName: &#x27;数量&#x27;, projStatus: 1, total_1: 2, total_2: 2, total_3: 2, total_4: 2, total_5: 2, total_6: 2, total_7: 2, total_8: 2, total_9: 2, total_10: 2 &#125;]这种数组结构</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="module-access"><span class="module"><span class="identifier">_data</span>.</span></span>length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (_data<span class="literal">[<span class="identifier">i</span>]</span>.countProject<span class="operator"> || </span>_data<span class="literal">[<span class="identifier">i</span>]</span>.countProject<span class="operator"> === </span><span class="number">0</span>) &#123;</span><br><span class="line">            countProject.push(&#123;</span><br><span class="line">                projStatus: _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus,</span><br><span class="line">                countProject: _data<span class="literal">[<span class="identifier">i</span>]</span>.countProject</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (_data<span class="literal">[<span class="identifier">i</span>]</span>.totalProjectAmount<span class="operator"> || </span>_data<span class="literal">[<span class="identifier">i</span>]</span>.totalProjectAmount<span class="operator"> === </span><span class="number">0</span>) &#123;</span><br><span class="line">            totalProjectAmount.push(&#123;</span><br><span class="line">                projStatus: _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus,</span><br><span class="line">                totalProjectAmount:  _data<span class="literal">[<span class="identifier">i</span>]</span>.totalProjectAmount</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (_data<span class="literal">[<span class="identifier">i</span>]</span>.totalContractAmount<span class="operator"> || </span>_data<span class="literal">[<span class="identifier">i</span>]</span>.totalContractAmount<span class="operator"> === </span><span class="number">0</span>) &#123;</span><br><span class="line">            totalContractAmount.push(&#123;</span><br><span class="line">                projStatus: _data<span class="literal">[<span class="identifier">i</span>]</span>.projStatus,</span><br><span class="line">                totalContractAmount: _data<span class="literal">[<span class="identifier">i</span>]</span>.totalContractAmount</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//因为有三行，所以需要调用deepDealArr这个函数三次 得到各自三个数组</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> _countProject = this.deep<span class="constructor">DealArr(<span class="params">countProject</span>, 1)</span></span><br><span class="line">    <span class="keyword">let</span> _totalProjectAmount = this.deep<span class="constructor">DealArr(<span class="params">totalProjectAmount</span>, 2)</span></span><br><span class="line">    <span class="keyword">let</span> _totalContractAmount = this.deep<span class="constructor">DealArr(<span class="params">totalContractAmount</span>, 3)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//以下是为了把数组转成对象，然后把三行对象塞进数组中，这样表格就能出来了，</span></span><br><span class="line">    关键用到了<span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>assign<span class="literal">()</span> 函数循环数组转成对象</span><br><span class="line">    <span class="keyword">let</span> _count = &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> _totalP = &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> _totalC = &#123;&#125;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">_countProject</span>.</span></span>map(<span class="keyword">function</span> (e,item) &#123;                        </span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>assign(_count, e);</span><br><span class="line">    &#125;);       </span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">_totalProjectAmount</span>.</span></span>map(<span class="keyword">function</span> (e,item) &#123;                        </span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>assign(_totalP, e);</span><br><span class="line">    &#125;);        </span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">_totalContractAmount</span>.</span></span>map(<span class="keyword">function</span> (e,item) &#123;                        </span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>assign(_totalC, e);</span><br><span class="line">    &#125;);      </span><br><span class="line">    <span class="keyword">let</span> _newTable = <span class="literal">[</span></span><br><span class="line"><span class="literal">        <span class="identifier">_count</span>,</span></span><br><span class="line"><span class="literal">        <span class="identifier">_totalP</span>,</span></span><br><span class="line"><span class="literal">        <span class="identifier">_totalC</span></span></span><br><span class="line"><span class="literal">    ]</span></span><br><span class="line"></span><br><span class="line">    this.table.data = _newTable</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是模板文件：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-<span class="keyword">table</span> :data=&quot;table.data&quot; style=&quot;width: 100%; margin-top: 20px;&quot; :loading=&quot;tableLoading&quot;&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;typeName&quot; label=&quot;条目&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_1&quot; label=&quot;报备中&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_2&quot; label=&quot;已报备&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_3&quot; label=&quot;投标中&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt; </span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_4&quot; label=&quot;已中标&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_6&quot; label=&quot;在建中&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_7&quot; label=&quot;已竣工&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_9&quot; label=&quot;已关闭&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_8&quot; label=&quot;已过期&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;el-<span class="keyword">table</span>-<span class="keyword">column</span> prop=&quot;total_10&quot; label=&quot;已删除&quot;&gt;&lt;/el-<span class="keyword">table</span>-<span class="keyword">column</span>&gt;</span><br><span class="line">    &lt;empty </span><br><span class="line">        v-<span class="keyword">if</span>=&quot;table.data.length == 0&quot;</span><br><span class="line">        slot=&quot;empty&quot;</span><br><span class="line">        style=&quot;height: 500px&quot;</span><br><span class="line">        tips=&quot;抱歉！暂时没有数据&quot; </span><br><span class="line">        smallTips=&quot;暂时还没有相关的数据可以展示&quot;</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;img src=&quot;~/assets/svg/table-empty.svg&quot; slot=&quot;img&quot;/&gt;</span><br><span class="line">    &lt;/empty&gt;</span><br><span class="line">&lt;/el-<span class="keyword">table</span>&gt;</span><br></pre></td></tr></table></figure>
<p>用total_的后面的数字来对应列的状态值，这样就能一一对应上了，最后附上完成的效果图</p>
<p><img src="5.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/507fa396/" data-id="ckdqs3sfk000lmgm0ezrf4iw4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-用Xshell登录阿里云服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/d86f9c95/" class="article-date">
  <time datetime="2019-06-12T03:42:29.000Z" itemprop="datePublished">2019-06-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/d86f9c95/">用Xshell登录阿里云服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用Xshell登录阿里云最需要注意的一个地方就是要使用阿里云服务器的公共ip，阿里云一个有两个ip，一个是公共的，一个是私有的，这个登录管理后台查看实例就可以看得到<br><img src="1.jpg"><br><img src="2.jpg"><br>最后会弹出是否接受密钥什么的，点确定就好，或者是弹出密码不对的，也重新输入密码即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/d86f9c95/" data-id="ckdqs3sfu0013mgm0fl2p9o5a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ubantu-apt-get-install方式安装mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/13666/" class="article-date">
  <time datetime="2019-05-15T06:41:02.000Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/13666/">ubantu apt-get install方式安装mysql</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="在ubantu上安装mysql并不难，主要是记录下安装数据库时居然不像windows那样选择安装位置，设置用户和密码等"><a href="#在ubantu上安装mysql并不难，主要是记录下安装数据库时居然不像windows那样选择安装位置，设置用户和密码等" class="headerlink" title="在ubantu上安装mysql并不难，主要是记录下安装数据库时居然不像windows那样选择安装位置，设置用户和密码等"></a>在ubantu上安装mysql并不难，主要是记录下安装数据库时居然不像windows那样选择安装位置，设置用户和密码等</h1><ol>
<li><code>sudo apt-get install mysql-server</code> 安装mysql核心服务</li>
<li><code>sudo apt-get install mysql-server</code> 安装mysql客户端</li>
</ol>
<p>安装完成后我们需要去mysql目录查看用户名和密码<br><code>sudo vim /etc/mysql/debain.cnf</code></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">host     = localhost</span><br><span class="line">user     = debian-sys-maint</span><br><span class="line">password = wrMqzOiffsyheEe1</span><br><span class="line">socket   = /var/run/mysqld/mysqld.sock</span><br><span class="line">[mysql_upgrade]</span><br><span class="line">host     = localhost</span><br><span class="line">user     = debian-sys-maint</span><br><span class="line">password = wrMqzOiffsyheEe1</span><br><span class="line">socket   = /var/run/mysqld/mysqld.sock</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>我们用debian-sys-maint用户来登陆<br><code>mysql -u debian-sys-maint -p</code><br>输入密码：<code>wrMqzOiffsyheEe1</code><br>然后修改密码：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> authentication_string=<span class="keyword">PASSWORD</span>(<span class="string">&#x27;root&#x27;</span>), <span class="keyword">plugin</span>=<span class="string">&#x27;mysql_native_password&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure>
<font color="red">
注意，authentication_string是密码 ，plugin是验证方式，这两个一定要同时改。从mysql5.7开始root的默认验证方式是auth_socket
</font>
可以输入 ` select user, plugin from mysql.user;` 查看到以下内容：
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+------------------+-----------------------+</span><br><span class="line">|<span class="string"> user             </span>|<span class="string"> plugin                </span>|</span><br><span class="line">+------------------+-----------------------+</span><br><span class="line">|<span class="string"> root             </span>|<span class="string"> auth_socket           </span>|</span><br><span class="line">|<span class="string"> mysql.session    </span>|<span class="string"> mysql_native_password </span>|</span><br><span class="line">|<span class="string"> mysql.sys        </span>|<span class="string"> mysql_native_password </span>|</span><br><span class="line">|<span class="string"> debian-sys-maint </span>|<span class="string"> mysql_native_password </span>|</span><br><span class="line">+------------------+-----------------------+</span><br><span class="line">4 rows in set (0.02 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
修改后的：
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+------------------+</span>-----------------------+</span><br><span class="line">| user             | plugin                |</span><br><span class="line"><span class="code">+------------------+</span>-----------------------+</span><br><span class="line">| root             | mysql<span class="emphasis">_native_</span>password |</span><br><span class="line">| mysql.session    | mysql<span class="emphasis">_native_</span>password |</span><br><span class="line">| mysql.sys        | mysql<span class="emphasis">_native_</span>password |</span><br><span class="line">| debian-sys-maint | mysql<span class="emphasis">_native_</span>password |</span><br><span class="line"><span class="code">+------------------+</span>-----------------------+</span><br><span class="line">4 rows in set (0.02 sec)</span><br></pre></td></tr></table></figure>
mysql_native_password这种系统root用户登录时才可以登录数据库的root用户。所以需要把auth_socket改为mysql_native_password，才可以不受系统用户限制。

<p>然后<code>exit;</code>推出mysql。<code>sudo service mysql restart</code> 重启mysql服务</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/13666/" data-id="ckdqs3sfe000bmgm01nwyf1d3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-解决npm-install安装任何包都报错的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/60785/" class="article-date">
  <time datetime="2019-05-13T10:21:10.000Z" itemprop="datePublished">2019-05-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/60785/">解决npm install安装任何包都报错的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在ubantu18系统上，之前不知道哪里设置错了，结果用nodejs的npm install任何一个包都报错，报错信息如下：</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> ERR! code ENOTFOUND</span><br><span class="line"><span class="built_in">npm</span> ERR! errno ENOTFOUND</span><br><span class="line"><span class="built_in">npm</span> ERR! network request to http://registry.cnpmjs.org/cnpm failed, reason: getaddrinfo ENOTFOUND registry.cnpmjs.org registry.cnpmjs.org:<span class="number">80</span></span><br><span class="line"><span class="built_in">npm</span> ERR! network This <span class="keyword">is</span> a problem related to network connectivity.</span><br><span class="line"><span class="built_in">npm</span> ERR! network In most cases you are behind a proxy <span class="keyword">or</span> have bad network settings.</span><br><span class="line"><span class="built_in">npm</span> ERR! network </span><br><span class="line"><span class="built_in">npm</span> ERR! network If you are behind a proxy, please make sure that the</span><br><span class="line"><span class="built_in">npm</span> ERR! network <span class="string">&#x27;proxy&#x27;</span> config <span class="keyword">is</span> set properly.  See: <span class="string">&#x27;npm help config&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">npm</span> ERR! A complete log <span class="keyword">of</span> <span class="built_in">this</span> run can be found in:</span><br><span class="line"><span class="built_in">npm</span> ERR!     <span class="regexp">/home/liu/</span>.<span class="built_in">npm</span>/_logs/<span class="number">2019</span><span class="number">-05</span><span class="number">-13</span>T12_45_42_040Z-debug.log</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>按照字面意思，应该是代理出了点问题，由于对npm的设置不是很了解，没办法，百度查查别人的解决办法吧。然后就真查到了，</p>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="keyword">set</span> <span class="keyword">registry</span> <span class="keyword">http</span>://<span class="keyword">registry</span>.cnpmjs.org</span><br></pre></td></tr></table></figure>
<p>如果提示要sudo那就加上sudo就行了。<br>验证一下 ： npm info underscore 如果有返回underscore的相应信息就表示成功了。<br>以上内容参考网址：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/nurdun/p/6824480.html">http://www.cnblogs.com/nurdun/p/6824480.html</a> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/60785/" data-id="ckdqs3sfx001bmgm0bz3weiml" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-element-ui-上传组件函数自定义参数传递" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/845b95cc/" class="article-date">
  <time datetime="2019-05-07T12:09:05.000Z" itemprop="datePublished">2019-05-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/845b95cc/">element-ui 上传组件函数自定义参数传递</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>有时候在表格中需要在每行中有上传需求时，需要定位到是哪一行上传的图片，然后才能组合数组发送到后端，这个时候默认的参数就无法满足我们的需求了，我们需要根据当前行的index来一一对应当前行的文件上传。比如要实现下面的效果：<br><img src="3.png"><br>要实现参数的自定义，我们需要在vue模板中修改函数调用的方式，通过类似：<code>((val)=&gt;&#123;func(val)&#125;)</code>的方式来调用相应的函数。<br><img src="1.png"><br>以及在文件编辑时要注意修改:file-list为表格中的字段，才能一一对应上<br><img src="2.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/845b95cc/" data-id="ckdqs3sf70003mgm0gwvqftd7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/element-ui/" rel="tag">element-ui</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-element-ui-表格中的form的input动态验证规则" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/3156ccd5/" class="article-date">
  <time datetime="2019-04-27T13:23:46.000Z" itemprop="datePublished">2019-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/3156ccd5/">element-ui 表格中的form的input动态验证规则</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="表格中的input需要做某些校验，比如，“本次报销金额”要小于“未报销金额”，这就有点麻烦了，我们都知道，element的form的验证规则rules都是在初始化的时候就定好了的，比如时间验证："><a href="#表格中的input需要做某些校验，比如，“本次报销金额”要小于“未报销金额”，这就有点麻烦了，我们都知道，element的form的验证规则rules都是在初始化的时候就定好了的，比如时间验证：" class="headerlink" title="表格中的input需要做某些校验，比如，“本次报销金额”要小于“未报销金额”，这就有点麻烦了，我们都知道，element的form的验证规则rules都是在初始化的时候就定好了的，比如时间验证："></a>表格中的input需要做某些校验，比如，“本次报销金额”要小于“未报销金额”，这就有点麻烦了，我们都知道，element的form的验证规则rules都是在初始化的时候就定好了的，比如时间验证：</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">date2:</span> [</span><br><span class="line">    &#123; <span class="attr">type:</span> <span class="string">&#x27;date&#x27;</span>, <span class="attr">required:</span> <span class="literal">true</span>, <span class="attr">message:</span> <span class="string">&#x27;请选择时间&#x27;</span>, <span class="attr">trigger:</span> <span class="string">&#x27;change&#x27;</span> &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<p>而我们项目中的是这样的:<br><img src="4.png"> 又不想自定义指令来做，还是看下element能不能做吧，于是就开始看文档，发现只能用自定义rules，但是自定义指令，写死的规则也不符合要求啊，因为表格的数据都是不固定的，<br>首先我们把表格的数据源字段移到我们的form中<br><img src="1.png"><br><img src="2.png"><br><img src="3.png"><br>然后自定义规则：<br><img src="5.png"><br>这里需要用到一些技巧，比如在模板中，</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:prop=<span class="string">&quot;`inputTaxTable.<span class="subst">$&#123;scope.$index&#125;</span>.thisApplyMoney`&quot;</span></span><br></pre></td></tr></table></figure>
<p>在需要校验的列中，<code>inputTaxTable.$&#123;scope.$index&#125;.thisApplyMoney</code> 查找当前行的数据源，</p>
<p>以及查找“未报销金额”这行的数据来跟当前金额进行对比的时候，保证找到的当前行的数据。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//field字段中包含了该行表格的index</span></span><br><span class="line">    <span class="keyword">let</span> field=rule.field;<span class="comment">//规则名称</span></span><br><span class="line">    <span class="keyword">let</span> _fieldArr=<span class="literal">[]</span>;</span><br><span class="line">    _fieldArr=field.split(<span class="character">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> _index=_fieldArr<span class="literal">[<span class="number">1</span>]</span>;<span class="comment">//得到表格的第n行</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="module-access"><span class="module"><span class="identifier">Number</span>.</span></span>parse<span class="constructor">Float(<span class="params">value</span>)</span>&gt;<span class="module-access"><span class="module"><span class="identifier">Number</span>.</span></span>parse<span class="constructor">Float(<span class="params">this</span>.<span class="params">ruleForm</span>.<span class="params">inputTaxTable</span>[<span class="params">_index</span>].<span class="params">notApplyMoney</span>)</span>)&#123;</span><br><span class="line">        return callback(<span class="keyword">new</span> <span class="constructor">Error(&#x27;不可大于未报销金额&#x27;)</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        callback<span class="literal">()</span>  <span class="comment">//这里一定要这样返回，否则validate函数只会执行一次</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.iyuge.cn/posts/3156ccd5/" data-id="ckdqs3sfa0007mgm04y94427w" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/element-ui/" rel="tag">element-ui</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/vue/js/">js</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/element-ui/" rel="tag">element-ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nexus/" rel="tag">nexus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react,</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF/" rel="tag">技术</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/element-ui/" style="font-size: 15px;">element-ui</a> <a href="/tags/js/" style="font-size: 17.5px;">js</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/nexus/" style="font-size: 10px;">nexus</a> <a href="/tags/nodejs/" style="font-size: 12.5px;">nodejs</a> <a href="/tags/react/" style="font-size: 12.5px;">react,</a> <a href="/tags/vue/" style="font-size: 20px;">vue</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 15px;">技术</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/posts/e1691e31/">运行yarn eject 后 yarn start 报错</a>
          </li>
        
          <li>
            <a href="/posts/204a2bf8/">在 create-react-app 中使用Ant Design中的坑</a>
          </li>
        
          <li>
            <a href="/posts/73a5b140/">windows下使用nexus搭建私有仓库并使用vue-cli 3 搭建组件库</a>
          </li>
        
          <li>
            <a href="/posts/c20fd3fa/">在重启阿里云ubantu后nginx、mysql、pm2等的重启</a>
          </li>
        
          <li>
            <a href="/posts/507fa396/">一个奇葩的表格统计需求</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 刘宏羽<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="https://cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>